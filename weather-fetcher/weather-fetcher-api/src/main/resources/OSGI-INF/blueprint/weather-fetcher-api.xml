<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:jaxrs="http://cxf.apache.org/blueprint/jaxrs"
           xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0
           https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

    <reference id="repository" interface="org.weather.fetcher.repo.WeatherStatRepo"/>

    <bean id="externalApiBean" class="org.weather.fetcher.api.ExternalApiFactory"
          factory-method="createExternalWeatherApi">
        <argument value="https://visual-crossing-weather.p.rapidapi.com"/>
    </bean>


    <bean id="weatherFetcherResourceImpl" class="org.weather.fetcher.api.WeatherFetcherResourceImpl">
        <argument ref="repository"/>
        <argument ref="externalApiBean"/>
    </bean>

    <jaxrs:server address="/weather" id="weatherFetcherResource">
        <jaxrs:serviceBeans>
            <ref component-id="weatherFetcherResourceImpl"/>
        </jaxrs:serviceBeans>
    </jaxrs:server>

</blueprint>
